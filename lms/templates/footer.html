<%page expression_filter="h"/>
<%!
  from datetime import datetime
  from django.utils.translation import gettext as _
  from django.conf import settings                                ## <-- THÊM
  from lms.djangoapps.branding.api import get_footer
  from openedx.core.djangoapps.lang_pref.api import footer_language_selector_is_enabled
%>
<%namespace name='static' file='static_content.html'/>

<%
  # Fallback an toàn cho context/brand
  footer = get_footer(is_secure=is_secure) or {}
  openedx_link = footer.get('openedx_link', {}) or {}
  openedx_link_url = openedx_link.get('url', 'https://openedx.org')
  openedx_link_title = openedx_link.get('title', 'Open edX')

  hide_openedx_link = context.get('hide_openedx_link', False)
  bidi = context.get('bidi', None)
  include_language_selector = context.get('include_language_selector', footer_language_selector_is_enabled())
  icp_license_info = getattr(settings, 'ICP_LICENSE_INFO', {}) or {}
%>

<div class="wrapper wrapper-footer">
  <footer id="footer" class="tutor-container"
    % if bidi:
      dir=${bidi}
    % endif
  >
    <div class="footer-top">
      <div class="powered-area">
        % if not hide_openedx_link:
        <ul class="logo-list">
          <li>${_('Powered by:')}</li>
          <li>
            <a href="https://docs.tutor.edly.io" rel="noopener" target="_blank">
              <img src="${static.url('images/cusc-logo.png')}" alt="${_('Runs on Tutor')}" width="80"/>
            </a>
          </li>
          <li>
            <a href="${openedx_link_url}" rel="noopener" target="_blank">
              <img src="${static.url('images/ctu-logo.png')}" alt="${openedx_link_title}" width="79"/>
            </a>
          </li>
        </ul>
        % endif
      </div>

      ## ---- Custom grid ----
      <div class="footer-grid" style="max-width:1200px;margin:2rem auto 0;display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));">
        <div class="footer-col">
          <h4 style="margin:0 0 1rem 0;">${_('About CUSC')}</h4>
          <p>${_('The Can Tho University Software Center provides online learning solutions and professional courses in programming, data science, and design.')}</p>
        </div>
        <div class="footer-col">
          <h4 style="margin:0 0 1rem 0;">${_('Quick Links')}</h4>
          <a href="/courses">${_('Courses')}</a>
          <a href="/about">${_('About')}</a>
          <a href="/tos">${_('Terms')}</a>
          <a href="/privacy">${_('Privacy')}</a>
        </div>
        <div class="footer-col">
          <h4 style="margin:0 0 1rem 0;">${_('Contact')}</h4>
          <p>Email: info@cusc.vn</p>
          <p>Phone: +84 292 3835 579</p>
          <p>Address: 1 Ly Tu Trong St, Ninh Kieu, Can Tho, Vietnam</p>
        </div>
      </div>
      ## ----------------------
    </div>

    <span class="copyright-site">Copyrights ©${datetime.now().year}. ${_('All Rights Reserved.')}</span>

    <div class="colophon" style="margin-top:1rem;">
      % if include_language_selector:
        <%include file="${static.get_template_path('widgets/footer-language-selector.html')}"/>
      % endif
      <p class="copyright">
        ${footer.get('copyright','')}
        % if icp_license_info.get('icp_license'):
          ${u" | {text}".format(text=icp_license_info.get('text', ''))}
          <a href="${icp_license_info.get('icp_license_link', '#')}">
            ${u" {icp}".format(icp=icp_license_info.get('icp_license'))}
          </a>
        % endif
      </p>
    </div>
  </footer>
</div>

% if context.get('include_dependencies', False):
  <%static:js group='base_vendor'/>
  <%static:css group='style-vendor'/>
  <%include file="widgets/segment-io.html"/>
  <%include file="widgets/segment-io-footer.html"/>
% endif

% if context.get('footer_css_urls'):
  % for url in context.get('footer_css_urls'):
    <link rel="stylesheet" type="text/css" href="${url}"/>
  % endfor
% endif
