// Include custom header
.nav-skip {
    &:focus {
        z-index: 9999;
    }
}
header.global-header {
    border: none;
    padding: 0;
    overflow: visible;
    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.06), 0px 1px 3px 0px rgba(0, 0, 0, 0.10);
    &:after {
        content: "";
        clear: both;
        display: block;
    }
    .main-header {
        display: flex;
        align-items: center;
        height: 50px;

        @include media-breakpoint-up(lg) {
            display: unset;
            height: auto;
        }
    }
    .header-logo {
        margin: 0;
        a {
            margin: 15px 0 15px 35px;
            height: auto;
            @include media-breakpoint-up(lg) {
                margin: 0;
                margin: 20px 0 0;
            }
            .logo {
                height: 24px;
                margin: 0;
            }
        }
        .course-header {
            display: none;
        }
    }
    .nav-links {
        width: 100%;
        .main {
            margin: 0 0 0 38px;
            .nav-tab {
                a {
                    font-size: 14px;
                    font-weight: 500;
                    line-height: 22px;
                    padding: 20px 0;
                    color: $light-dark;
                    margin: 0 16px 0 0;
                    border-bottom: 2px solid transparent;
                    &.active, &:hover {
                        color: $dark;
                        border-bottom: 2px solid $primary;
                    }
                }
            }
        }
        .secondary {
            margin: 0;
            position: relative;
            justify-content: end;
            .toggle-user-dropdown {
                padding: 9px 15px;
                background: $primary-light;
                color: $primary;
                font-size: 14px;
                font-weight: 500;
                line-height: 20px;
                border-radius: 6px;
                margin: 12px 0;
                &:after {
                    margin: 4px 0 0 4px;
                    border: 2px solid #15376D;
                    border-width: 2px 2px 0 0;
                    transform: rotate(135deg);
                    content: "";
                    height: 5px;
                    position: relative;
                    top: 2px;
                    width: 5px;
                    display: inline-block;
                    vertical-align: top;
                }
                .username {
                    font: -webkit-control;
                }
            }
            .dropdown-user-menu {
                position: absolute;
                right: 0;
                top: 60px;
                width: 224px;
                border-radius: 6px;
                box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.05), 0px 4px 6px -2px rgba(0, 0, 0, 0.05), 0px 10px 15px -3px rgba(0, 0, 0, 0.10);
                border: none;
                overflow: hidden;
                .dropdown-item {
                    border: none !important;
                    &.hide-desktop {
                        @include media-breakpoint-up(lg) {
                            display: none;
                        }
                    }
                    a {
                        box-sizing: border-box;
                        padding: 10px;
                        font-size: 14px;
                        line-height: 20px;
                        color: $light-dark;
                        &:hover {
                            background: $primary-light;
                            color: $dark;                         ;
                        }
                    }
                }
            }
        }
    }
    .hamburger-menu {
        height: 17px;
        width: 20px;
        left: 15px;
        top: 18px;
        background: none;
        border: 0;
        padding: 0;
        box-shadow: none;

        .line {
            height: 2px;
            &:nth-child(2), &:nth-child(3) {
                top: 6px;
            }
            &:nth-child(4) {
                top: 12px;
            }
        }
    }
}
.mobile-menu {
    position: absolute;
    left: 0;
    top: 54px;
    z-index: 9999;
    margin: 0;
    border: none;
    border-bottom: 2px solid $primary;
    width: 100%;
    .mobile-nav-link {
        a {
            font-weight: normal;
            padding: 16px;
            font-size: 14px;
            line-height: 20px;
            color: $light-dark;
            border: none;
            &:hover, &.active {
                background: $primary-light;
                color: $dark;
            }
        }
    }
}
.header-container {
    margin: 0 auto;
    padding: 0 15px;
    max-width: 1600px;
    box-sizing: border-box;
    &:after {
        display: block;
        clear: both;
        content: "";
    }
}

.theme-toggle-button{
    position: relative;
    display: flex;
    align-items: center;
    margin-right: 0 !important;

    @include media-breakpoint-up(lg) {
        margin-right: 1.5rem !important;
    }

    .light-theme-icon, .dark-theme-icon{
        width: 18px;
        height: 1.5rem;
        color: $primary;
        & svg {
            width: inherit;
            height: inherit;
        }
    }

    #toggle-switch {
        display: flex;
        margin: 0 5px;

        label {
            margin: 0;
        }

/* The switch - the box around the slider */
        .switch {
            position: relative;
            display: inline-block;
            width: 45px;
            height: 24px;

            /* Hide default HTML checkbox */
            input {
                opacity: 0;
                width: 0;
                height: 0;

              &:focus {
                ~ .slider {
                  outline: 2px solid $primary;
                  outline-offset: 1px;
                }
              }
            }

            /* The slider */
            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: $light-theme-switch-bg-color;
                transition: .4s;

                &::before{
                    position: absolute;
                    content: "";
                    height: 20px;
                    width: 20px;
                    left: 3px;
                    bottom: 2px;
                    background-color: white;
                    transition: .4s;
                }

                &.round{
                    border-radius: 34px;
                    &::before{
                        border-radius: 50%;
                    }
                }
            }
        }
    }
}



body.indigo-dark-theme {
    background: $body-bg-d !important;
    color: $text-color-d !important;
    .window-wrap {
        background: $body-bg-d;
    }
    .mobile-menu {
        position: absolute;
        left: 0;
        top: 54px;
        z-index: 9999;
        margin: 0;
        border: none;
        border-bottom: 2px solid $primary;
        width: 100%;
        .mobile-nav-link {
            a {
                background: #454545;
                color: $text-color-d;
                &:hover, &.active {
                    background: #323232;
                    color: $text-color-d;
                }
            }
        }
    }
    header.global-header {
        background: $body-bg-d;
        box-shadow: 0px 1px 2px 0px rgba(255, 255, 255, 0.8), 0px 1px 3px 0px rgba(255, 255, 255, 0.1);
        .nav-links {
            .main {
                .nav-tab {
                    a {
                        color: $text-color-d;
                        &.active, &:hover {
                            color: $text-color-d;
                            border-bottom: 2px solid $text-color-d;
                        }
                    }
                }
            }
            .secondary {
                .toggle-user-dropdown {
                    background: $primary-d;
                    color: $btn-color-d;
                    &:after {
                        border-color: $btn-color-d;
                    }
                }
                .dropdown-user-menu {
                    background: $light-overlay-d;
                    box-shadow: 0px 0px 0px 1px rgba(255, 255, 255, 0.8), 0px 4px 6px -2px rgba(255, 255, 255, 0.05), 0px 10px 15px -3px rgba(255, 255, 255, 0.1);
                    .dropdown-item {
                        a {
                            color: $text-color-primary;
                            background: none;
                            &:hover {
                                background: $body-bg-d;
                                color: $text-color-d;                         ;
                            }
                        }
                    }
                }
            }
        }
        .hamburger-menu {
            .line {
                background: $text-color-d;
            }
        }
    }

// theme toggle switch
  .theme-toggle-button{
        .light-theme-icon, .dark-theme-icon{
            color: $text-color-primary;
        }
        #toggle-switch {
            .switch {
                input {
                  &:focus {
                    ~ .slider {
                      outline-color: $primary-d;
                    }
                  }
                }
                /* The slider */
                .slider {
                    background-color: $dark-theme-switch-bg-color;
                    &::before{
                        transform: translateX(19px);
                        box-shadow: 0 0 1px $primary-d;
                    }
                }
            }
        }
    }
}

/* =========================
   CUSC Header (lean & same UI)
   ========================= */

/* Colors & spacing tokens */
:root {
  --cusc-blue: #0056A1;
  --cusc-blue-hover: #0F59C9;
  --accent: #10B981;
  --accent-strong: #059669;
  --line: #e5e7eb;
  --txt: #1f2937;
  --sub: #6b7280;

  --h-pad-sm: 8px;
  --h-pad-md: 12px;
  --h-pad-lg: 16px;

  --ctrl-h: 40px;
  --ctrl-radius: 10px;
  --gap: 12px;
}

/* = Header shell */
header.global-header {
  background: #fff;
  border-bottom: 0 !important;
  box-shadow: 0 6px 20px rgba(0,0,0,.03);
}
header.global-header .header-container {
  width: 100%;
  max-width: none;
  padding: 0;
  margin: 0;
}
header.global-header .main-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--gap);
  min-height: 60px;
  padding: 0 var(--h-pad-lg);
  background: transparent;
}

/* = Logo block (trái) */
header.global-header .header-logo {
  margin: 0;
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start;
  gap: 30px !important;
}
header.global-header .header-logo a {
  display: flex !important;
  align-items: center !important;
  gap: 10px;
  text-decoration: none;
  color: inherit;
  margin: 0;
}
header.global-header .header-logo .logo {
  height: 28px;
  width: auto;
  display: block;
  flex: 0 0 auto;
}
header.global-header .header-logo .brand-text {
  font-weight: 800;
  font-size: 1.15rem;
  color: var(--cusc-blue);
  line-height: 2;
  display: flex;
  align-items: center;
  letter-spacing: .2px;
  transition: color .25s ease, transform .2s ease, text-shadow .25s ease;
}
header.global-header .header-logo .brand-link:hover .brand-text {
  color: var(--cusc-blue-hover);
  transform: translateY(-1px);
  text-shadow: 0 2px 6px rgba(0,86,161,.25);
}

/* = Right cluster (Register • Sign In) */
header.global-header .nav-right {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: var(--gap);
}

/* = Shared controls */
header.global-header .btn-auth {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--ctrl-h);
  padding: 0 14px;
  gap: 8px;
  line-height: 1;
  border-radius: var(--ctrl-radius);
  border: 1.5px solid transparent;
  text-decoration: none;
  cursor: pointer;
  transition: filter .15s ease, background-color .15s ease, border-color .15s ease, color .15s ease, box-shadow .25s ease, transform .25s ease;
}
header.global-header .btn-auth svg { width: 16px; height: 16px; flex: 0 0 auto; display: block; }
header.global-header .btn-auth span { line-height: 1; }

/* = Register button (outline green) */
header.global-header .btn-register {
  background: transparent;
  border-color: var(--accent);
  color: var(--accent);
  font-weight: 800;
  font-size: 15px;
}
header.global-header .btn-register:hover {
  background: #ECFDF5;
  border-color: var(--accent-strong);
  color: var(--accent-strong);
  box-shadow: 0 4px 10px rgba(16,185,129,.25);
  transform: translateY(-2px);
}
header.global-header .btn-register:active {
  transform: translateY(0);
  box-shadow: 0 2px 5px rgba(16,185,129,.2);
}

/* = Sign in button (solid blue) */
header.global-header .btn-signin {
  background: var(--cusc-blue);
  border-color: var(--cusc-blue);
  color: #fff;
  font-weight: 800;
  font-size: 15px;
}
header.global-header .btn-signin:hover {
  background: var(--cusc-blue-hover);
  border-color: var(--cusc-blue-hover);
  box-shadow: 0 4px 10px rgba(0,86,161,.3);
  transform: translateY(-2px);
}
header.global-header .btn-signin:active {
  transform: translateY(0);
  box-shadow: 0 2px 5px rgba(0,86,161,.25);
  background: #00498C;
}
header.global-header .btn-signin:focus-visible {
  outline: 2px solid rgba(0,86,161,.5);
  outline-offset: 2px;
}

/* = Optional: sr-only utility */
.sr-only, .sr {
  position: absolute;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}

/* === Discover Courses tab (center → both sides + shimmer + active) === */
header.global-header .nav-discover {
  margin-left: 1.5rem; /* tách vừa mắt khỏi 'CUSC Learning' */
  font-weight: 600;
  color: var(--txt);
  text-decoration: none;
  font-size: 15px;
  position: relative;
  display: inline-block;          /* để transform/width ổn định */
  transition: color .2s ease, transform .2s ease;
}
header.global-header .nav-discover:hover {
  color: var(--cusc-blue);
  transform: translateY(-1px);
}
header.global-header .nav-discover::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -4px;
  height: 2px;
  width: 100%;
  background: linear-gradient(90deg, var(--cusc-blue), var(--accent), var(--cusc-blue));
  background-size: 200% 100%;
  opacity: 0;
  transform: translateX(-50%) scaleX(0);  /* scale từ giữa */
  transform-origin: center;               /* từ giữa ra 2 bên */
  transition: transform .3s ease, opacity .25s ease;
}
header.global-header .nav-discover:hover::after,
header.global-header .nav-discover.active::after {
  opacity: 1;
  transform: translateX(-50%) scaleX(1); /* mở ra hai bên */
  animation: shimmer 1.5s linear infinite;
}
header.global-header .nav-discover.active {
  color: var(--cusc-blue);
  font-weight: 700;
}
@keyframes shimmer {
  0%   { background-position: 0% 0; }
  100% { background-position: 200% 0; }
}

/* ==== FINAL: Solid at top, glass on scroll ==== */
header.global-header{
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
  background: #fff !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: 0 6px 20px rgba(0,0,0,.03);
  border-bottom: 0;
  transition: background .25s ease, backdrop-filter .25s ease, box-shadow .25s ease;
}
header.global-header.scrolled{
  background: rgba(255,255,255,0.72) !important;
  backdrop-filter: saturate(160%) blur(12px) !important;
  -webkit-backdrop-filter: saturate(160%) blur(12px) !important;
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
}
header.global-header.scrolled::after {
  content: "";
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 2px;
  pointer-events: none;
  background: linear-gradient(90deg, #0F59C9, #10B981);
  opacity: .35;
}




/* ==== Discover (đã đăng nhập) — giữ hiệu ứng riêng, tránh đè header guest ==== */
/* =========================
   AUTH HEADER ONLY (clean)
   ========================= */

/* Layout khối link khi đã đăng nhập */
header.global-header .nav-links{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
}
header.global-header .nav-links .main{
  display:flex; align-items:center; gap:18px;
}
header.global-header .nav-links .secondary{
  margin-left:auto; display:flex; align-items:center; gap:8px;
}

/* Reset “viền/gạch mặc định” của tab trong khu auth (tránh đè Discover) */
header.global-header .nav-links .nav-tab,
header.global-header .nav-links .nav-tab a{
  border:0 !important; box-shadow:none !important; background-image:none !important;
}
header.global-header .nav-links .nav-tab::before,
header.global-header .nav-links .nav-tab::after{ display:none !important; }

/* Discover ở trạng thái đăng nhập (nếu bạn dùng class riêng) */
header.global-header .nav-discover-auth{
  position:relative; display:inline-flex; align-items:center;
  margin-left:1.5rem; padding:10px 0;
  font-size:15px; font-weight:600; line-height:1; color:var(--txt);
  text-decoration:none; transition:color .2s ease;
}
header.global-header .nav-discover-auth:hover{ color:var(--cusc-blue); }

/* Underline từ giữa ra hai bên + shimmer (active/hover) */
header.global-header .nav-discover-auth::after{
  content:""; position:absolute; left:50%; bottom:-6px; height:2px; width:100%;
  background:linear-gradient(90deg,var(--cusc-blue),var(--accent),var(--cusc-blue));
  background-size:200% 100%;
  opacity:0; transform:translateX(-50%) scaleX(0); transform-origin:center;
  border-radius:999px; transition:transform .28s ease, opacity .22s ease;
}
header.global-header .nav-discover-auth:hover::after,
header.global-header .nav-discover-auth.active::after{
  opacity:1; transform:translateX(-50%) scaleX(1); animation:shimmer 1.5s linear infinite;
}
@keyframes shimmer{0%{background-position:0% 0}100%{background-position:200% 0}}

/* User pill (nút hiển thị username) */
header.global-header .toggle-user-dropdown,
header.global-header .nav-links .secondary > a:first-child,
header.global-header .nav-links .secondary > button:first-child{
  height:36px; padding:0 12px; display:inline-flex; align-items:center; justify-content:center;
  gap:6px; border-radius:8px; border:1.3px solid var(--line,#e5e7eb);
  background:#F8FBFF; color:var(--cusc-blue,#0056A1);
  font-size:14px; font-weight:700; line-height:1; box-shadow:none;
}
header.global-header .toggle-user-dropdown::before,
header.global-header .nav-links .secondary > a:first-child::before,
header.global-header .nav-links .secondary > button:first-child::before{
  content:""; width:15px; height:15px; display:inline-block; background:currentColor;
  -webkit-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23000' d='M12 12a5 5 0 1 0-5-5a5 5 0 0 0 5 5m0 2c-3.33 0-10 1.34-10 4v2h20v-2c0-2.66-6.67-4-10-4'/></svg>") no-repeat center/contain;
          mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23000' d='M12 12a5 5 0 1 0-5-5a5 5 0 0 0 5 5m0 2c-3.33 0-10 1.34-10 4v2h20v-2c0-2.66-6.67-4-10-4'/></svg>") no-repeat center/contain;
}
header.global-header .toggle-user-dropdown:hover,
header.global-header .nav-links .secondary > a:first-child:hover,
header.global-header .nav-links .secondary > button:first-child:hover{
  transform:translateY(-1px); box-shadow:0 3px 8px rgba(0,86,161,.1);
}
header.global-header .toggle-user-dropdown:active,
header.global-header .nav-links .secondary > a:first-child:active,
header.global-header .nav-links .secondary > button:first-child:active{
  transform:translateY(0); box-shadow:0 2px 6px rgba(0,86,161,.1);
}
header.global-header .toggle-user-dropdown:focus-visible,
header.global-header .nav-links .secondary > a:first-child:focus-visible,
header.global-header .nav-links .secondary > button:first-child:focus-visible{
  outline:2px solid rgba(0,86,161,.35); outline-offset:2px;
}

/* Dropdown user */
header.global-header .dropdown-user-menu{
  margin-top:8px; border:1px solid var(--line,#e5e7eb); border-radius:12px;
  box-shadow:0 20px 40px rgba(0,0,0,.12); overflow:hidden;
}
header.global-header .dropdown-user-menu .dropdown-item a{
  display:block; padding:10px 14px; color:var(--txt);
}
header.global-header .dropdown-user-menu .dropdown-item a:hover{
  background:#F3F6FB; color:var(--cusc-blue);
}

/* Responsive nhỏ gọn */
@media (max-width:1200px){
  header.global-header .nav-links .main{ gap:14px; }
}
@media (max-width:992px){
  header.global-header .nav-discover-auth{ margin-left:.875rem; font-size:14px; }
}


/* ==== Auth: khiến Discover giống hệt guest (chỉ tác động tab Discover) ==== */
header.global-header .nav-tab--discover{
  border: 0 !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
  background: transparent !important;
}
header.global-header .nav-tab--discover::before,
header.global-header .nav-tab--discover::after{ display:none !important; }
header.global-header .nav-tab--discover > a{
  border: 0 !important;
  box-shadow: none !important;
  background-image: none !important;
}

/* Optional: đảm bảo metrics của .nav-discover khớp y chang guest */
header.global-header .nav-tab--discover .nav-discover{
  margin-left: 1.5rem;     /* cùng guest */
  font-size: 15px;         /* cùng guest */
  line-height: 1;          /* tránh đội hàng */
  padding: 0;              /* để ::after bám chuẩn bottom:-4px của bạn */
}


/* ---------- AUTH HEADER: tighten height, brand, user ---------- */

/* 1) Khung header: đúng 60px, không đội chiều cao */
header.global-header .main-header{
  min-height: 60px !important;
  height: 60px !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  gap: 12px !important;
}

/* 2) Logo + brand: không xuống dòng, line-height gọn */
header.global-header .header-logo{ gap: 20px !important; }
header.global-header .header-logo a{ white-space: nowrap !important; }
header.global-header .header-logo .brand-text{
  line-height: 1.15 !important;   /* trước là 2 -> gây cao và dễ wrap */
  display: inline-flex !important;
  align-items: center !important;
}

/* 3) Discover (auth) cùng baseline & không kéo cao hàng */
header.global-header .nav-tab--discover .nav-discover{
  line-height: 1 !important;
  padding: 10px 0 !important;
  font-size: 15px !important;
  margin-left: 1.5rem !important;
}
header.global-header .nav-tab--discover .nav-discover::after{
  bottom: 2px !important;        /* chỉnh baseline cho thẳng hàng */
}

/* 4) Cụm bên phải + user pill: thu lại */
header.global-header .nav-links .secondary{
  margin-left: auto !important;
  gap: 8px !important;
}

/* User pill (username) gọn, không làm header “phồng” */
header.global-header .toggle-user-dropdown,
header.global-header .nav-links .secondary > a:first-child,
header.global-header .nav-links .secondary > button:first-child{
  height: 34px !important;        /* 34–36px là đẹp, chọn 34 để gọn */
  padding: 0 10px !important;
  font-size: 14px !important;
  line-height: 1 !important;
  border-radius: 8px !important;
  border: 1.3px solid var(--line,#e5e7eb) !important;
  background: #F5F9FF !important;
  color: var(--cusc-blue,#0056A1) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 6px !important;
  box-shadow: none !important;
}

/* Icon trước username nhỏ lại xíu cho cân */
header.global-header .toggle-user-dropdown::before,
header.global-header .nav-links .secondary > a:first-child::before,
header.global-header .nav-links .secondary > button:first-child::before{
  width: 15px !important;
  height: 15px !important;
}

/* 5) Loại mọi underline/border tab mặc định để không “đè” Discover */
header.global-header .nav-links .nav-tab,
header.global-header .nav-links .nav-tab > a{
  border: 0 !important;
  box-shadow: none !important;
  background-image: none !important;
}
header.global-header .nav-links .nav-tab::before,
header.global-header .nav-links .nav-tab::after{ display: none !important; }

/* 6) Full-bleed hợp lý nhưng vẫn chừa biên nhỏ hai bên */
header.global-header .main-header{
  padding-left: 24px !important;
  padding-right: 24px !important;
}
@media (max-width: 992px){
  header.global-header .main-header{
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
}



/* ==== Discover active (auth header) same as guest ==== */

/* Chữ xanh + đậm khi đang active */
header.global-header .nav-tab--discover .nav-discover.active {
  color: var(--cusc-blue) !important;
  font-weight: 700 !important;
}

/* Giữ underline hiện cố định (từ giữa ra 2 bên, không shimmer loop) */
header.global-header .nav-tab--discover .nav-discover.active::after {
  opacity: 1 !important;  
  transform: translateX(-50%) scaleX(1) !important;
  animation: none !important; /* tắt shimmer liên tục */
  background: linear-gradient(90deg, var(--cusc-blue), var(--accent)) !important;
}


/* === Unified spacing: brand ↔ Discover (guest + auth) === */
:root{
  /* chỉnh giá trị này tới khi bạn thấy khớp tuyệt đối */
  --discover-gap: 54px;  
}

/* Guest */
header.global-header .nav-discover{
  margin-left: var(--discover-gap) !important;
}


/* =========================================================
   Mobile Responsive for Header
   - Paste at the END of _header.scss
   - No HTML changes required
   ========================================================= */

/* Helpers: toggle visibility */
.hidden-mobile { display: none !important; }
@media (min-width: 769px) {
  .hidden-desktop { display: none !important; }
  .hidden-mobile  { display: revert !important; }
}

@media (max-width: 768px) {
  header.global-header {
    position: sticky;
    top: 0;
    z-index: 1000;
    /* giữ style blur/đổ bóng hiện có; chỉ tối ưu spacing */
    .main-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 56px;
      padding: 0 12px;
      gap: 8px;
    }
  }

  /* Logo: giữ bên trái, tối ưu kích thước */
  .header-logo {
    margin: 0 !important;
    a {
      margin: 0 !important;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      .logo {
        height: 22px !important;
        width: auto;
      }
      .brand-text, .site-name, .brand__text {
        font-size: 14px;
        line-height: 1;
        white-space: nowrap;
        max-width: 160px;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  }

  /* Khu vực điều hướng: ẩn menu ngang lớn nếu có */
  .nav-primary,
  .nav-left,
  .nav-center,
  .nav-links,
  .navbar-links,
  .desktop-only {
    display: none !important;
  }

  /* Khu vực user ở bên phải: giữ dropdown sẵn có, thu gọn icon */
  .nav-right,
  nav.nav-right,
  .secondary.d-flex.align-items-center {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  /* Nút auth: giữ icon, rút gọn text; touch target >=44px */
  .btn-auth {
    height: 36px;
    line-height: 36px;
    padding: 0 10px;
    border-radius: 10px;
    font-size: 13px;
    display: inline-flex;
    align-items: center;
    gap: 6px;

    svg {
      width: 18px; height: 18px;
      flex-shrink: 0;
    }
  }

  /* Nếu có 2 nút (Sign in / Register), tránh tràn */
  .btn-auth + .btn-auth {
    margin-left: 4px;
  }

  /* Icon-only buttons (ví dụ chuông, search, vv) */
  .icon-btn,
  .toggle-user-dropdown,
  .nav-icon,
  .avatar-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px; height: 40px;      /* touch target */
    border-radius: 10px;
    padding: 0;
    outline: none;
    border: 0;
    background: transparent;
  }

  .toggle-user-dropdown[aria-expanded="true"],
  .icon-btn:active {
    transform: translateY(0.5px);
  }

  /* Dropdown user đã có sẵn: tối ưu vị trí + kích thước trên mobile */
  .nav-item-dropdown,
  .user-dropdown,
  .user-menu {
    position: relative;

    .dropdown-menu,
    #user-menu,
    .menu {
      position: absolute;
      right: 8px;
      top: calc(100% + 8px);
      width: min(92vw, 360px);
      max-height: calc(100vh - 100px);
      overflow: auto;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(0,0,0,.08);
      /* nếu header có blur/transparent, thêm backdrop cho menu */
      backdrop-filter: saturate(1.2);
    }

    /* Hide label text cạnh avatar để gọn hơn */
    .user-name,
    .user-label,
    .caret,
    .dropdown-caret {
      display: none !important;
    }
  }

  /* Khoảng cách tổng thể phải gọn hơn */
  .nav-right .btn-auth,
  .secondary .btn-auth {
    margin-right: 0;
  }

  /* Hạn chế tràn: chữ dài bị cắt gọn */
  .btn-auth span,
  .nav-right .text,
  .secondary .text {
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
}

/* Siêu nhỏ (≤480px): ưu tiên icon, ẩn label để đỡ chật */
@media (max-width: 480px) {
  .header-logo a .brand-text,
  .header-logo a .site-name,
  .header-logo a .brand__text {
    max-width: 120px;
  }

  .btn-auth span { display: none; } /* chỉ còn icon */
  .btn-auth { padding: 0 8px; width: 40px; justify-content: center; }

  /* Giảm thêm khoảng cách bên phải */
  .nav-right,
  .secondary.d-flex.align-items-center {
    gap: 4px;
  }

  /* Dropdown full-bleed hơn cho dễ bấm */
  .nav-item-dropdown .dropdown-menu,
  .user-dropdown .menu,
  .user-menu .menu {
    right: 6px;
    width: min(96vw, 360px);
  }
}

/* Tùy chọn: nếu đã có lớp .hidden-mobile / .hidden-desktop trong HTML
   thì khối dưới giúp tự động bật/tắt ở mobile */
@media (max-width: 768px) {
  .hidden-desktop { display: inline-flex !important; }
  .hidden-mobile  { display: none !important; }
}
